@{
    ViewBag.Title = "Skill-Based Career Suggestions";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div style="display: flex; flex-direction: column; height: 100vh;">
    <section class="hero-section d-flex justify-content-center align-items-center" style="padding-top: 20px; padding-bottom: 100px;">
        <div class="row">
            <a class="back-icon" href="@Url.Action("Home", "Home")"><i class="fas fa-long-arrow-alt-left"></i></a>
            <h1 class="text-white text-center">SKILL-BASED CAREER SUGGESTIONS</h1>
            <div class="col-8 mx-auto mb-3 mt-5">
                <h6 style="text-align: center; color: white;">Input your current field of study or what you're good at, we will analyze them to provide diverse and relevant career suggestions.</h6>
            </div>
            <div class="container">
                <div class="row justify-content-center mt-3">
                    <div class="col-lg-6 col-9">
                        @using (Html.BeginForm("SuggestCareer", "Home", FormMethod.Post, new { @class = "custom-form", @role = "search", @autocomplete = "off" }))
                        {
                            <div class="input-group input-group-lg" style="border-radius: 5px">
                                <span class="input-group-text bi-search" id="basic-addon1" style="font-size: 20px !important; margin-right: 5px;"></span>
                                <input name="SearchKeyword" type="search" class="form-control" id="SearchKeyword" placeholder="Your study field,..." aria-label="Search" value="@ViewBag.SearchResult">
                                <button type="submit" class="form-control" style="border-radius: 5px !important">Search</button>
                            </div>
                        }
                    </div>
                    <div class="col-1">
                        <button class="show-modal-btn" onclick="openModal()">
                            <span style="margin-right: 8px;"><i class="fas fa-sort"></i></span>
                            Show ...
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    @if (ViewBag.ErrorMessage != null)
    {
        <section class="featured-section">
            <div class="container" style="position: relative; bottom: 30px">
                <div class="justify-content-center">
                    <div class="mb-4 mb-lg-0">
                        <div class="custom-block bg-white shadow-lg">
                            <p style="color: red;">@ViewBag.ErrorMessage</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    }
    else if (Model != null && !string.IsNullOrEmpty(ViewBag.SearchResult))
    {
        <section class="featured-section">
            <div class="container" style="position: relative; bottom: 50px">
                <div class="row justify-content-center">
                    <div class="col-lg-10 col-md-12">
                        <div class="custom-block bg-white shadow-lg rounded-lg position-relative">

                            <button id="closeResult" class="close-btn position-absolute" style="top: 15px; right: 15px; background: none; border: none; font-size: 1.5rem; color: #666; cursor: pointer;">
                                <i class="fas fa-times"></i>
                            </button>

                            <div class="result-header p-4 border-bottom">
                                <h3 class="text-primary mb-0">Gợi ý nghề nghiệp</h3>
                            </div>

                            <div class="result-content p-4">
                                <div class="career-suggestions mb-4" style="font-size: 1.9rem">
                                    @Html.Raw(Model.Response.Replace("\n", "<br>"))
                                </div>


                                <div class="reference-job mt-4 pt-3 border-top">
                                    <h4 class="text-secondary mb-3">Một công việc đã tham khảo</h4>
                                    <div class="reference-details p-3 bg-light rounded">
                                        <p class="mb-2"><strong class="text-dark">Tiêu đề:</strong> @Model.Reference.Title</p>
                                        <p class="mb-0"><strong class="text-dark">Mô tả:</strong> @Model.Reference.Description</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <script>
            document.getElementById('closeResult').addEventListener('click', function () {
                var resultSection = document.querySelector('.featured-section');
                if (resultSection) {
                    resultSection.style.display = 'none';
                }
            });
        </script>
    }

    <div class="modal" id="skillsModal">
        <div class="modal-content">
            <h2>Skills</h2>
            <ul>
                <li>Python, JavaScript, C#</li>
                <li>HTML, CSS, React, ASP.NET MVC</li>
                <li>SQL Server, MySQL, MongoDB</li>
                <li>Git, Docker, Visual Studio Code</li>
                <li>Problem Solving, Teamwork, Communication</li>
            </ul>
            <h2>Technologies</h2>
            <ul>
                <li>Python, JavaScript, C#</li>
                <li>HTML, CSS, React, ASP.NET MVC</li>
                <li>SQL Server, MySQL, MongoDB</li>
                <li>Git, Docker, Visual Studio Code</li>
                <li>Problem Solving, Teamwork, Communication</li>
            </ul>
        </div>
    </div>
</div>

<script>
    var modal = document.getElementById('skillsModal');

    function openModal() {
        modal.style.display = 'flex';
    }

    function closeModal() {
        modal.style.display = 'none';
    }

    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }
</script>